<h2>Edycja monitoringu</h2>
<h3>Informacje podstawowe</h3>
<div class="form-horizontal">
  <div class="form-group">
    <label for="monitoring_title" class="col-sm-2 control-label">Tytuł:</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" [(ngModel)]="monitoring.name" id="monitoring_title">
    </div>
  </div>
  <div class="form-group">
    <label for="monitoring_description" class="col-sm-2 control-label">Opis:</label>
    <div class="col-sm-10">
      <tinymce [(value)]="monitoring.description"></tinymce>
    </div>
  </div>
</div>
<h3>Pytania</h3>
<div class="questions">
  <accordion *ngIf="questions.length > 0" [dragula]='"questions"' [dragulaModel]='questions'>
    <accordion-group #group *ngFor="let question of questions, let i = index">
      <div accordion-heading>
        <a href="#" class="dragula-handle btn btn-xs btn-primary" title="Przytrzymaj i przeciągnij, aby przesunać">
          <i class="fa fa-arrows-v" aria-hidden="true"></i> Przesuń
        </a>
        <i class="pull-right fa fa-caret-down"
          [ngClass]="{'fa-rotate-180': group?.isOpen}"  aria-hidden="true"></i>
        Pytanie: {{ question.name }}
      </div>
      <div class="text-right">
        <div class="btn-group">
          <button class="btn btn-primary btn-xs" (click)="removeQuestion(question)">
            <i class="fa fa-trash" aria-hidden="true"></i> Skasuj
          </button>
          <button class="btn btn-primary btn-xs" *ngIf="i !== 0" (click)="moveQuestion(question, -1,  $event)">
            <i class="fa fa-arrow-up" aria-hidden="true"></i> Do góry
          </button>
          <button class="btn btn-primary btn-xs" *ngIf="i != questions.length - 1" (click)="moveQuestion(question, +1,  $event)">
            <i class="fa fa-arrow-down" aria-hidden="true"></i> W dół
          </button>
        </div>
      </div>
      <sowp-question-edit [question]="question" [questions]="questions"></sowp-question-edit>
    </accordion-group>
  </accordion>
  <p *ngIf="!(questions.length > 0)">Brak pytań jeszcze!</p>
</div>
<p>&nbsp;</p>
<div class="row">
  <div class="col-xs-12 col-md-9">
    <div class="btn-group" dropdown>
      <button type="button" class="btn btn-primary" dropdownToggle>
        <i class="fa fa-plus" aria-hidden="true"></i> Dodaj <span class="caret"></span>
      </button>
      <ul class="dropdown-menu" role="menu" aria-labelledby="single-button">
        <li role="menuitem">
          <a class="dropdown-item" href="#" (click)="addTextBoxQuestion()">Pytanie tekstowe</a>
        </li>
        <li role="menuitem">
          <a class="dropdown-item" href="#" (click)="addDropdownQuestion()">Pytanie wyboru</a>
        </li>
        <li role="menuitem">
          <a class="dropdown-item" href="#" (click)="addLongTextQuestion()">Pytanie długie tekstowe</a>
        </li>
      </ul>
    </div>
  </div>
  <div class="col-xs-12 col-md-3">
    <button class="btn btn-primary" (click)="saveMonitoring()">
      <i class="fa fa-floppy-o" aria-hidden="true"></i> Zapisz
    </button>
  </div>
</div>

<pre *ngIf="preview">
  {{ preview | json}}
</pre>
